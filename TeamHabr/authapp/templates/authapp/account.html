{% extends 'mainapp_base.html' %}
{% load static %}
{% load auth_extras %}

{% block users %}
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-2"></div>
        <div class="col text-center">
            {% if user.is_superuser or user|has_group:"Moder"  %}
            <img src="https://radojuva.com/wp-content/uploads/2019/10/moderator-2.jpg" alt="" width="150px" height="100px">
            {% endif %}
            {% if user.avatar %}
            <img src="{{ user.avatar.url }}" alt="{{ user.name }} {{ user.surname }}" height="100px">
            {% else %}
            <img class="img-thumbnail" src="https://cdn4.iconfinder.com/data/icons/avatars-xmas-giveaway/128/batman_hero_avatar_comics-512.png" alt="" width="100px" height="100px">
            {% endif %}
            <p class="user-name">{{ user.name }} {{ user.surname }}</p>
        </div>
        <div class="col text-justify">
            <p>Логин: {{ user.username }}</p>
            <p>Имя: {{ user.name }}</p>
            <p>Фамилия: {{ user.surname }}</p>
            <p>e-mail: {{ user.email }}</p>
            <p>Возраст: {{ user.age }}</p>
            <p>О себе:  {{ user.aboutMe }}</p>
            <div class="text-center">
                <a class="text-info" href="{% url 'authapp:edit' %}">Редактировать</a>
            </div>
        </div>
        <div class="col-2"></div>
    </div>

    <hr>
    <div class="row">
        <div class="col-2"></div>
        <div class="col">
            <p class="h3">Мои статьи</p>
            <a class="text-info" href="{% url 'main:article_create' %}">Создать новую статью</a>
        </div>
        <div class="col-2"></div>

    </div>
    <div class="row">
        <div class="col-2"></div>
        <div class="col text-justify">
            {% if articles %}
            {% for article in articles %}
            <p class="h2 text-center">{{ article.title }} {% if article.post_status == 'Drf' %}
                <a href="{% url 'admin:change_status_post' article.slug 'Aip'%}">
                    <i class="bi bi-truck"></i></a>
                {% endif %}</p>
            <p>Статус: {{ article.get_post_status_display }}</p>
            <a href="{% url 'main:article_edit' slug=article.slug %}">Редактировать статью</a>
            <p>{{ article.text| truncatewords:200 }}</p>
            {% endfor %}
            {% else %}
            <p class="h2 text-center">У вас ещё нет статей</p>
            {% endif %}
        </div>
        <div class="col-2"></div>
    </div>
</div>

{% endblock %}
